<template>
  <div class="hello">
    <Modal width="640"
      v-model="modal1"
      title="魔豆艺设学院导师合作协议">
      <div class="content">

        <p class="MsoNormal" align="left" style="margin-left:0cm;text-align:left;text-indent:0cm;">
        <h1>
          魔豆艺设学院导师合作协议
        </h1>
        <p class="1" style="margin-left:0cm;text-indent:0cm;">
          第一条 协议内容及规定<span></span>
        </p>

        </p>
        <p class="MsoNormal" align="left" style="margin-left:42.0pt;text-align:left;text-indent:0cm;">
          1. 甲方聘请乙方担任作魔豆艺设学院<u><span>&nbsp;&nbsp;&nbsp; </span>兼职导师<span>&nbsp;&nbsp; </span></u>。<span></span>
        </p>
        <p class="MsoNormal" style="margin-left:42.0pt;text-indent:0cm;">
          2. 本协议有效期自<u><span>&nbsp; 2019 </span></u>年<u><span>&nbsp; 04 </span></u>月<u><span> 3 </span></u>日起，至<u><span>&nbsp; 2020 </span></u>年<u><span>&nbsp; 4&nbsp; </span></u>月<u><span> 2&nbsp; </span></u>日止。合同期满聘用关系自然解除。聘用合同期满前一个月，经双方协商同意，可以续签聘用合同。聘用合同期满前一个月，经双方协商同意，可以续签聘用合同；合同履行期间，乙方因个人原因无法继续履行协议合作，需提前一个月通知甲方，即可终止合作协议；如在课程期内，需配合甲方做好客户交接程序。<span></span>
        </p>
        <p class="MsoNormal" align="left" style="margin-left:42.0pt;text-align:left;text-indent:0cm;">
          3. 甲乙双方合作形式包括但不限于：作品集学生辅导<span> -- studio</span>课题；作品集学生辅导<span> -- 1v1</span>辅导；专题公开课；专题<span>workshop</span>；学术文章供稿；专业技能分享或授课；<span></span>
        </p>
        <p class="1" style="text-indent:0cm;">
          <br />
        </p>
        <p class="1" style="margin-left:0cm;text-indent:0cm;">
          第二条 甲、乙双方权利与义务<span></span>
        </p>
        <p class="1" style="text-indent:0cm;">
          <br />
        </p>
        <p class="1" style="margin-left:0cm;text-indent:0cm;">
          一、 甲方的权利与义务<span></span>
        </p>
        <p class="1" align="left" style="margin-left:42.55pt;text-align:left;text-indent:0cm;">
          1.&nbsp;&nbsp;
          甲方有权使用乙方提供的，约定范围内的个人信息及个人作品用以宣传使用。乙方提供的个人信息及个人作品除用作宣传外，甲方不得将其用于其他商业目的。<span></span>
        </p>
        <p class="1" align="left" style="margin-left:42.55pt;text-align:left;text-indent:0cm;">
          2.&nbsp;&nbsp;
          甲方有权监督、审核乙方对甲方客户提供的教学进度、教学质量及教学成果。<span></span>
        </p>
        <p class="1" align="left" style="margin-left:42.55pt;text-align:left;text-indent:0cm;">
          3.&nbsp;&nbsp;
          甲方有义务依照乙方提供的教学教研服务提供相应的报酬。<span></span>
        </p>
        <p class="1" style="margin-left:52.5pt;text-indent:0cm;">
          <br />
        </p>
        <p class="1" style="margin-left:0cm;text-indent:0cm;">
          二、 乙方的权利与义务<span></span>
        </p>
        <p class="1" style="margin-left:42.55pt;text-indent:0cm;">
          1.&nbsp;&nbsp; 乙方签订本协议，即代表其已仔细阅读本协议及附件内容、同意并接受前述事项，不存在任何异议，在本协议签订之后，除双方另行书面签订补充协议外，乙方不得以任何理由改变前述事项。<span></span>
        </p>
        <p class="1" style="margin-left:42.55pt;text-indent:0cm;">
          2.&nbsp;&nbsp; 乙方需向甲方提供真实的个人信息及材料，包括身份证件、毕业证书、作品集、任职背景等，以便甲方确认乙方是否达到本协议要求的任职资质。<span></span>
        </p>
        <p class="1" style="margin-left:42.55pt;text-indent:0cm;">
          3.&nbsp;&nbsp; 乙方有权根据甲方的教学要求自主设计和制定课程内容。<span></span>
        </p>
        <p class="1" style="margin-left:42.55pt;text-indent:0cm;">
          4.&nbsp;&nbsp; 乙方由于不可抗力因素，无法继续履行协议约定的，应提前一个月告知甲方并征得甲方同意，同时需配合甲方完成客户交接手续，交接手续办理完毕前，乙方不得擅自中断对于客户的服务。<span></span>
        </p>
        <p class="1" style="margin-left:42.55pt;text-indent:0cm;">
          5.&nbsp;&nbsp; 乙方有权利依照提供的教学教研服务向甲方获取相应的报酬。<span></span>
        </p>
        <p class="1" style="margin-left:84.0pt;text-indent:0cm;">
          <br />
        </p>
        <p class="1" style="margin-left:0cm;text-indent:0cm;">
          第三条 &nbsp;&nbsp;不可抗力条款<span></span>
        </p>
        <p class="1" style="margin-left:42.55pt;text-indent:0cm;">
          乙方在甲方教学期间为学生提供教学服务所设计制作、开发的艺术课题及相关作品、产品等所有权及知识产权归属双方共有；甲方可将该部分资源用于宣传用途使用，且在法律允许范围内可包含乙方信息。<span></span>
        </p>
        <p class="1" style="margin-left:84.0pt;text-indent:0cm;">
          <br />
        </p>
        <p class="1" style="margin-left:0cm;text-indent:0cm;">
          第四条 &nbsp;&nbsp;保密条款<span></span>
        </p>
        <p class="1" style="margin-left:42.55pt;text-indent:.75pt;">
          1.&nbsp;&nbsp; 甲乙双方承诺对协议的内容负有保密义务，不得向任何第三方披露。<span></span>
        </p>
        <p class="1" style="margin-left:42.55pt;text-indent:.75pt;">
          2.&nbsp;&nbsp; 甲乙双方保证在协议履行过程中知悉的对方任何秘密、公司秘密、商业秘密、合同信息、辅导培训信息以及其他有保密性质的信息，都要承担保密义务。不论本协议是否变更、解除或终止，本条款均具法律效力。<span></span>
        </p>
        <p class="1" style="margin-left:42.55pt;text-indent:.75pt;">
          3.&nbsp;&nbsp; 乙方在未经甲方书面同意的情况下，不得私自将甲方提供的数据及内部资料与第三方分享，不得向第三方提供或透露甲方的辅导培训过程和方法。如乙方违反本条规定，甲方有权要求乙方立即停止侵权行为，并赔偿违约金。<span></span>
        </p>
        <p class="1" style="margin-left:42.55pt;text-indent:.75pt;">
          4.&nbsp;&nbsp; 乙方在教学过程中知悉的甲方客户的任何个人信息、申请信息、作品集信息，都要承担保密义务，不得泄漏于任意第三方。如乙方违反本条规定，甲方有权要求乙方立即停止侵权行为，并向甲方支付违约金。如有违反，甲方依法保留对其诉讼的权利。<span></span>
        </p>
        <p>
          <br />
        </p>

        <div>
          <br>
        </div>
      </div>
    </Modal>
    <div class="register">
      <div class="dialog">
        <!--img class="banner" src="../assets/image/login-bg.jpg"/-->
      </div>
      <div class="register-main">
        <Tabs :value="tabname"  :animated="false">
          <TabPane name="login" label="登录">
            <Form>
              <FormItem prop="user">
                <Input type="text" v-model="formInline.user" placeholder="用户名" size="large">
                </Input>
              </FormItem>
              <FormItem prop="user">
                <Input type="password" v-model="formInline.password" placeholder="密码" size="large">
                </Input>
              </FormItem>

              <Button type="primary" long size="large" @click="loginHandler">登录</Button>
              <!--div class="register-goto">
                <p class="register-to-login">没有账号？<a href="#/login" class="">去注册</a></p>
              </div-->
            </Form>
          </TabPane>
          <TabPane name="regist" label="注册">
            <Form class="form" ref="formInline" :model="formInline" :rules="ruleInline">
              <FormItem prop="user">
                <Input type="text" v-model="formInline.user" placeholder="邮箱地址" size="large">
                </Input>
              </FormItem>
              <FormItem prop="password">
                <Input type="password" v-model="formInline.password" placeholder="密码" size="large">
                </Input>
              </FormItem>
              <FormItem prop="cpassword">
                <Input type="password" v-model="formInline.cpassword" placeholder="重复密码" size="large">
                </Input>
              </FormItem>
              <div class="register-rule">
                <Checkbox class="register-checkbox" v-model="single">我已经阅读并同意</Checkbox>
                <a @click="ruleHandler">魔豆艺设学院导师合作协议</a>
              </div>
              <FormItem>
                <Button type="primary" @click="handleSubmit('formInline')" long size="large" :disabled="!single">注册</Button>
              </FormItem>
              <div class="ts">
                <p>该账号是魔豆导师管理平台的账号，您今后将在此对教学和学生项目进行管理。</p>
              </div>
              <FormItem>

              </FormItem>
              <!--div class="register-goto">
                <p class="register-to-login">没有账号？<a href="#/login" class="">注册</a></p>
              </div-->
            </Form>
          </TabPane>
        </Tabs>

      </div>
    </div>
  </div>
</template>

<script>

import axios from 'axios'
import qs from 'qs'
// import crypto from 'crypto-js'
import loader from '../utils/loader'

export default {
  name: 'Register',
  data () {
    var validatePassCheck = (rule, value, callback, source, options) => {
      if (value === '') {
        return callback(new Error('请再次输入密码'))
      } else if (value !== this.formInline.password) {
        return callback(new Error('两次密码不一致'))
      } else {
        callback()
      }
    }
    return {
      modal1: false,
      single: false,
      tabname: 'regist',
      formInline: {
        user: '',
        password: '',
        cpassword: ''
      },
      ruleInline: {
        user: [
          { required: true,
            message: '请输入正确的邮箱地址!',
            trigger: 'blur',
            transform (value) {
              // var myreg = /^[1][3,4,5,7,8][0-9]{9}$/
              var reg = /^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/
              if (!reg.test(value)) {
                return false
              } else {
                console.log(value)
                return value
              }
            } }
        ],
        password: [
          { required: true, message: '请输入密码', trigger: 'blur' },
          { type: 'string', min: 6, message: 'The password length cannot be less than 6 bits', trigger: 'blur' }
        ],
        cpassword: [
          {required: true, validator: validatePassCheck, trigger: 'blur'}
        ]
      }
    }
  },
  methods: {
    ruleHandler () {
      console.log('this is ')
      this.modal1 = true
    },
    gotoinfo () {
      console.log('f')
      this.$router.push('/teachinfo')
    },
    loginHandler (name) {
      axios.defaults.withCredentials = true
      axios.post('/dataserver/modo/login.php', qs.stringify({
        username: this.formInline.user,
        password: this.formInline.password
      })).then((data) => {
        // 处理数据
        console.log(data)
        if (data.data.result === '1') {
          this.$Message.success('登陆已成功！')
          this.$router.push('/teachinfo')
          // window.open('./', '_self')
        } else {
          this.$Message.error('请检查用户名和密码是否正确！')
        }
      })
    },
    handleSubmit (name) {
      this.$refs[name].validate((valid) => {
        if (valid) {
          // this.$Message.success('Success!')
          // let message = this.formInline.user + '|:::|' + this.formInline.password
          // let key = 'key'
          // let encrypt = crypto.AES.encrypt(message, key).toString()
          this.isloading = true

          axios.post('/dataserver/modo/register.php', qs.stringify({
            username: this.formInline.user,
            password: this.formInline.password
          })).then((data) => {
            // 处理数据
            console.log(data)
            console.log(data.data.result)
            if (data.data.result === '1') {
              this.$Message.success('注册已成功！')
              this.tabname = 'login'
              // window.open('./login.html', '_self')
            }
            if (data.data.result === '2') {
              this.$Message.error('用户名已存在！')
            }
            this.isloading = false
          })
        } else {
          this.$Message.error('Fail!')
        }
      })
    },
    validityHandler (data) {
      console.log(data.data)
      if (data.data.result === '1') {
        this.$router.push('/teachinfo')
      } else {
        this.islogined = false
      }
    }
  },
  created () {
    loader.post('/dataserver/modo/validityJWT.php', {}, this.validityHandler)
  }
}
</script>
<style scoped>
  .register-main {
    width: 400px;
    height: 496px;
    padding: 72px 50px 40px;
    position: absolute;
    background: #fff;
    -webkit-box-shadow: 0 10px 30px 0 rgba(0,0,0,.05);
    box-shadow: 0 10px 30px 0 rgba(0,0,0,.05);

  }
  .register-checkbox{
    text-align: left;

  }
  .dialog {
    width: 100%;
    background: #515a6e;
    //background-color: #515a6e;
    height: 755px;
  }
  .banner {
    display: block;
    width:100%;
    height: 750px;
    object-fit: cover;
  }
  .register {
    /*width: 100%;
    height: 755px;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-pack: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    background: url("../assets/image/login-bg.jpg") no-repeat 50%;
    background-size: cover;
    margin-bottom: -160px;*/

    width:100%;
    height: 750px;

    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-pack: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;

    //background: url("../assets/image/login-bg.jpg") no-repeat 50%;
    object-fit: cover;
  }
  a{
    margin-left: 5px;
  }
  .register-rule{
    text-align: left;
    margin-top: 16px;
    margin-bottom: 16px;
  }
  .register-goto{
    text-align: right;
    margin-top: 16px;
    margin-bottom: 16px;
  }
  .ts{
    text-align: left;
    height: 30px;
    line-height: 2em;
    color: #019642;
  }

  .content{
    width: 560px;
    margin: auto;
    text-align:left ;
  }
  h1{
    text-align: center;
    margin-bottom: 50px;
  }
  p{
    color: #717576;
    font-size: 12px;
    margin-bottom: 5px;
  //font-weight: bold;
  }
  span{
    font-size:12px;
    font-weight: normal;
  }
</style>
